!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):e.workerize=t()}(this,function(){function e(e,t,n){e.addEventListener("message",function(r){var o=r.data,i=o.id;if("RPC"===o.type&&null!=i)if(o.method){var s=t[o.method];null==s?e.postMessage({type:"RPC",id:i,error:"NO_SUCH_METHOD"}):Promise.resolve().then(function(){return s.apply(null,o.params)}).then(function(t){e.postMessage({type:"RPC",id:i,result:t})}).catch(function(t){e.postMessage({type:"RPC",id:i,error:""+t})})}else{var a=n[i];if(null==a)throw Error("Unknown callback "+i);delete n[i],o.error?a[1](Error(o.error)):a[0](o.result)}})}return function(t,n){var r=this,o={},i="__xpo"+Math.random().toString().substring(2)+"__";"function"==typeof t&&(t="("+Function.prototype.toString.call(t)+")("+i+")"),t=function(e,t,n){return e=(e=e.replace(/^(\s*)export\s+default\s+/m,function(e,r){return n.default=!0,""+r+t+".default="})).replace(/^(\s*)export\s+((?:async\s*)?function(?:\s*\*)?|const|let|var)(\s+)([a-zA-Z$_][a-zA-Z0-9$_]*)/gm,function(e,r,o,i,s){return n[s]=!0,""+r+t+"."+s+"="+o+i+s}),"var "+t+"={};\n"+e+"\n"+t+";"}(t,i,o)+"\n("+Function.prototype.toString.call(e)+")(self,"+i+",{})";var s,a=URL.createObjectURL(new Blob([t])),c=new Worker(a,n),u=c.terminate,l={},f=0;for(s in c.kill=function(e){c.postMessage({type:"KILL",signal:e}),setTimeout(c.terminate)},c.terminate=function(){URL.revokeObjectURL(a),u.call(r)},c.call=function(e,t){return new Promise(function(n,r){var o="rpc"+ ++f;l[o]=[n,r],c.postMessage({type:"RPC",id:o,method:e,params:t})})},c.rpcMethods={},e(c,c.rpcMethods,l),c.expose=function(e){c[s]=function(){return c.call(e,[].slice.call(arguments))}},o)s in c||c.expose(s);return c}});
//# sourceMappingURL=workerize.umd.js.map
