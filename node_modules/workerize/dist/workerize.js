function e(e,t,n){e.addEventListener("message",function(r){var o=r.data,s=o.id;if("RPC"===o.type&&null!=s)if(o.method){var a=t[o.method];null==a?e.postMessage({type:"RPC",id:s,error:"NO_SUCH_METHOD"}):Promise.resolve().then(function(){return a.apply(null,o.params)}).then(function(t){e.postMessage({type:"RPC",id:s,result:t})}).catch(function(t){e.postMessage({type:"RPC",id:s,error:""+t})})}else{var i=n[s];if(null==i)throw Error("Unknown callback "+s);delete n[s],o.error?i[1](Error(o.error)):i[0](o.result)}})}module.exports=function(t,n){var r=this,o={},s="__xpo"+Math.random().toString().substring(2)+"__";"function"==typeof t&&(t="("+Function.prototype.toString.call(t)+")("+s+")"),t=function(e,t,n){return e=(e=e.replace(/^(\s*)export\s+default\s+/m,function(e,r){return n.default=!0,""+r+t+".default="})).replace(/^(\s*)export\s+((?:async\s*)?function(?:\s*\*)?|const|let|var)(\s+)([a-zA-Z$_][a-zA-Z0-9$_]*)/gm,function(e,r,o,s,a){return n[a]=!0,""+r+t+"."+a+"="+o+s+a}),"var "+t+"={};\n"+e+"\n"+t+";"}(t,s,o)+"\n("+Function.prototype.toString.call(e)+")(self,"+s+",{})";var a,i=URL.createObjectURL(new Blob([t])),l=new Worker(i,n),c=l.terminate,u={},p=0;for(a in l.kill=function(e){l.postMessage({type:"KILL",signal:e}),setTimeout(l.terminate)},l.terminate=function(){URL.revokeObjectURL(i),c.call(r)},l.call=function(e,t){return new Promise(function(n,r){var o="rpc"+ ++p;u[o]=[n,r],l.postMessage({type:"RPC",id:o,method:e,params:t})})},l.rpcMethods={},e(l,l.rpcMethods,u),l.expose=function(e){l[a]=function(){return l.call(e,[].slice.call(arguments))}},o)a in l||l.expose(a);return l};
//# sourceMappingURL=workerize.js.map
